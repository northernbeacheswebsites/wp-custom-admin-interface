jQuery(document).ready(function($){function e(e,a){function i(e){var t=e;if(-1!==t.indexOf("<span")){var a=t.indexOf("<span");return t.substr(0,a-1)}return t}$("#admin-menu-manager").empty();var n="",s=e,r=a,o=JSON.parse(atob(s)),l=JSON.parse(atob(r));for(key in o){if(-1!==o[key][4].indexOf("wp-menu-separator"))n+='<li class="mjs-nestedSortable-no-nesting menu-item"><div class="menu-item-separator"><span class="hr-container"><hr class="separator-rule"></span><i class="fa fa-trash-o delete-menu-item delete-separator" title="Remove separator" aria-hidden="true"></i></div></li>';else{var d=i(o[key][0]),c=o[key][2],u=o[key][6],m=o[key][4],p=decodeURIComponent(o[key][3]),f=decodeURIComponent(o[key][5]),v=o[key][1];if(-1!==u.indexOf("dashicons-"))var h='<span data="'+u+'" class="menu-item-icon dashicons-before '+u+'"></span>';else var h='<span data="'+u+'" class="svg svg-menu-icon menu-item-icon" style="background-image: url(&quot;'+u+'&quot;);"></span>';n+='<li class="menu-item"><div>'+h+'<input readonly="readonly" type="text" data="'+c+'" class="menu-label" value="'+d+'"><i class="fa fa-pencil-square-o edit-menu-item" title="Edit menu label" aria-hidden="true"></i><input readonly="readonly" type="text" data="'+c+'" class="menu-url restricted-advanced-functionality" style="margin-left:20px;" value="'+c+'"><i class="restricted-advanced-functionality fa fa-link edit-menu-item-link" title="Edit menu link" aria-hidden="true"></i><input readonly="readonly" type="text" data="'+m+'" class="menu-classes restricted-advanced-functionality" style="margin-left:20px;" value="'+m+'"><i class="restricted-advanced-functionality fa fa-code edit-menu-item-classes" title="Edit menu classes" aria-hidden="true"></i>'+t(v)+'<input readonly="readonly" type="text" data="'+p+'" class="menu-third-value" style="margin-left:20px;" value="'+p+'"><input readonly="readonly" type="text" data="'+f+'" class="menu-fifth-value" style="margin-left:20px;" value="'+f+'"><i class="fa fa-eye-slash remove-menu-item" title="Hide menu item" aria-hidden="true"></i></div>';var _=l[c];if(null!=_){n+="<ul>";for(key in _){var y=i(_[key][0]),g=_[key][2],b=_[key][1],w=decodeURIComponent(_[key][3]);n+='<li class="menu-item"><div><span data="dashicons-admin-generic" class="menu-item-icon dashicons-before dashicons-admin-generic"></span><input readonly="readonly" type="text" data="'+c+"["+g+']" class="menu-label" value="'+y+'"><i class="fa fa-pencil-square-o edit-menu-item" title="Edit menu label" aria-hidden="true"></i><input readonly="readonly" type="text" data="'+g+'" class="menu-url restricted-advanced-functionality" style="margin-left:20px;" value="'+g+'"><i class="restricted-advanced-functionality fa fa-link edit-menu-item-link" title="Edit menu link" aria-hidden="true"></i><input readonly="readonly" type="text" data="menu-top" class="menu-classes restricted-advanced-functionality" style="margin-left:20px;" value="menu-top"><i class="restricted-advanced-functionality fa fa-code edit-menu-item-classes" title="Edit menu classes" aria-hidden="true"></i>'+t(b)+'<input readonly="readonly" type="text" data="" class="menu-third-value" style="margin-left:20px;" value="'+w+'"><input readonly="readonly" type="text" data="" class="menu-fifth-value" style="margin-left:20px;" value=""><i class="fa fa-eye-slash remove-menu-item" title="Hide menu item" aria-hidden="true"></i></div></li>'}n+="</ul>"}n+="</li>"}}$("#admin-menu-manager").append(n)}function t(e){for(var t=o(),a=t.length,i='<select style="margin-left:20px; width: 180px;" disabled="true" class="restricted-advanced-functionality menu-capability">',n=0;n<a;n++)e==t[n]?i+='<option selected="selected">'+t[n]+"</option>":i+="<option>"+t[n]+"</option>";return i+='</select><i class="restricted-advanced-functionality fa fa-lock edit-menu-capability" title="Edit menu access" aria-hidden="true"></i>'}function a(){for(var e=$("#admin-menu-manager .menu-item div"),t=0;t<e.length;++t){var a=e[t];-1!==($(a).find(".menu-classes").val()||"").indexOf("added-custom-menu-item")&&$(a).append('<i class="fa fa-trash-o delete-menu-item delete-custom-menu-item" title="Remove menu item" aria-hidden="true"></i>')}}function i(){"none"==$(".restricted-advanced-functionality").css("display")?$(".restricted-advanced-functionality").css({display:"none"}):$(".restricted-advanced-functionality").css({display:"inline-block"})}function n(){$(".restricted-advanced-functionality").css({display:"none"})}function s(){"none"==$(".restricted-advanced-functionality").css("display")&&($(".restricted-advanced-functionality").css({display:"inline-block"}),$("#advanced-menu-functionality").html('<i class="fa fa-universal-access" aria-hidden="true"></i> Simple functionality'))}function r(){var e=$("#wp_custom_admin_interface_remove_menu_item").val();if(null!=e)var t=e.split(",");$(".menu-label").each(function(e){var a=$(this).attr("data"),i=$(this).parent().parent(),n=$(this).parent().find(".remove-menu-item");-1!=$.inArray(a,t)?($(i).addClass("removed-menu-item"),$(n).addClass("fa-eye"),$(n).removeClass("fa-eye-slash")):($(i).removeClass("removed-menu-item"),$(this).removeClass("fa-eye"),$(this).addClass("fa-eye-slash"))})}function o(){var e=$("#admin-capabilities").text();if(null!=e)var t=e.split(",");return t}function l(e,t){var a=e,i=$("#combinedListOfUsersAndRoles").attr("data"),n=i.slice(0,-1),s=n.split(","),r='<div class="exception-case"><select>';for(key in s){var o=s[key];if(o.indexOf("Role:")>=0){var l=o.substr(6,o.length-6);r+=l==a?'<option selected="selected" value="'+l+'">'+o+"</option>":'<option value="'+l+'">'+o+"</option>"}else{var d=o.indexOf("("),c=o.indexOf(")"),l=o.substr(d+1,c-d-1),u=o.substr(0,d);r+=l==a?'<option selected="selected" value="'+l+'">'+u+"</option>":'<option value="'+l+'">'+u+"</option>"}}r+='</select><i class="fa fa-plus add-exception-case" aria-hidden="true"></i><i class="fa fa-minus remove-exception-case" aria-hidden="true"></i></div>',t.find("#outputOfUsersAndRolesSelection").append(r)}function d(e){e.find("#outputOfUsersAndRolesSelection").append('<div class="add-exception-case" id="add-initial-exception"><h3><i class="fa fa-plus" aria-hidden="true"></i> Add an exception case</h3></div>')}function c(){$(".plugin-item").each(function(e){var t=$(this).find("#plugin-name").attr("data"),a=$("#wp_custom_admin_interface_hide_these_plugins").val();if(null!=a)var i=a.split(",");-1!=$.inArray(t,i)&&($(this).addClass("hidden-plugin-item"),$(this).find(".remove-plugin-item").addClass("fa-eye"),$(this).find(".remove-plugin-item").removeClass("fa-eye-slash"))})}function u(){$(".user-item").each(function(e){var t=$(this).find("#user-name").attr("data"),a=$("#wp_custom_admin_interface_hide_these_users").val();if(null!=a)var i=a.split(",");-1!=$.inArray(t,i)&&($(this).addClass("hidden-user-item"),$(this).find(".remove-user-item").addClass("fa-eye"),$(this).find(".remove-user-item").removeClass("fa-eye-slash"))})}function m(){$(".sidebar-item").each(function(e){var t=$(this).find("#sidebar-name").attr("data"),a=$("#wp_custom_admin_interface_hide_these_sidebars").val();if(null!=a)var i=a.split(",");-1!=$.inArray(t,i)&&($(this).addClass("hidden-sidebar-item"),$(this).find(".remove-sidebar-item").addClass("fa-eye"),$(this).find(".remove-sidebar-item").removeClass("fa-eye-slash"))})}function p(e){function t(e){for(node in e){var t=e[node].id,a=e[node].title,n=(""+a).replace(/\'/g,'"'),s=n;if(-1!==n.indexOf("<"))var n=$("<div/>").html(n).text()+"<title-not-editable>";var r=e[node].parent,o=e[node].href,l=e[node].group,d=e[node].meta,c='<input style="font-weight:bold;" title="'+t+'" readonly="readonly" type="text" class="node-title" value=\''+n+"'>";-1!==s.indexOf("<")||(c+='<i class="fa fa-pencil-square-o edit-node-title" title="Edit menu title" aria-hidden="true"></i>');var u='<input style="margin-left: 20px;" readonly="readonly" type="text" class="node-href" value="'+o+'"><i class="fa fa-link edit-node-link" title="Edit menu link" aria-hidden="true" style="display: inline-block;"></i>',m='<i class="fa fa-eye-slash remove-node-item" title="Hide menu item" aria-hidden="true"></i>';if(-1==i.indexOf(t))if(0==r)i.push('<li><div data-group="'+l+'"><span data="'+t+'" class="node-id" style="display:none;">'),i.push(t),i.push("</span>"+c+u+m+"</div>"),i.push("</li>");else if(-1!=i.indexOf(r)){var p=i.indexOf(r),f=i.indexOf("</ul>",p);"<ul>"==i[p+2]?(i.splice(f+0,0,'<li><div data-group="'+l+'"><span class="node-id" data="'+t+'" style="display:none;">'),i.splice(f+1,0,t),i.splice(f+2,0,"</span>"+c+u+m+"</div>"),i.splice(f+3,0,"</li>")):(i.splice(p+2,0,"<ul>"),i.splice(p+3,0,'<li><div data-group="'+l+'"><span class="node-id" data="'+t+'" style="display:none;">'),i.splice(p+4,0,t),i.splice(p+5,0,"</span>"+c+u+m+"</div>"),i.splice(p+6,0,"</li>"),i.splice(p+7,0,"</ul>"))}}}$("#toolbar-menu-manager").empty();var a=JSON.parse(atob(e));console.log(a);var i=[];do{t(a);var n=0,s=0;for(node in a){n++;var r=a[node].id;$.inArray(r,i)>=0&&s++}}while(n!==s);var o=i.join("");$("#toolbar-menu-manager").append(o)}function f(){var e=$("#wp_custom_admin_interface_remove_toolbar_item").val();if(null!=e)var t=e.split(",");$("#toolbar-menu-manager li > div").each(function(e){var a=$(this),i=$(this).find(".node-id").attr("data"),n=$(this).parent().find(".remove-node-item");-1!=$.inArray(i,t)?($(a).addClass("removed-node-item"),$(n).addClass("fa-eye"),$(n).removeClass("fa-eye-slash")):($(a).removeClass("removed-node-item"),$(n).removeClass("fa-eye"),$(n).addClass("fa-eye-slash"))})}function v(){for(var e=$("#toolbar-menu-manager .node-id"),t=0;t<e.length;++t){var a=e[t],i=$(a).parent();-1!==$(a).attr("data").indexOf("unique-node-")&&$(i).append('<i class="fa fa-trash-o delete-node-item delete-custom-node-item" title="Remove menu item" aria-hidden="true"></i>')}}var h=CodeMirror.fromTextArea(document.getElementById("wp_custom_admin_interface_custom_css_code"),{lineNumbers:!0,mode:"css",theme:"blackboard",matchBrackets:!0,autoCloseTags:!0,autoCloseBrackets:!0}),h=CodeMirror.fromTextArea(document.getElementById("wp_custom_admin_interface_custom_login_css_code"),{lineNumbers:!0,mode:"css",theme:"blackboard",matchBrackets:!0,autoCloseTags:!0,autoCloseBrackets:!0}),_=CodeMirror.fromTextArea(document.getElementById("wp_custom_admin_interface_custom_javascript_code"),{lineNumbers:!0,mode:"javascript",theme:"blackboard",matchBrackets:!0,autoCloseTags:!0,autoCloseBrackets:!0}),y=CodeMirror.fromTextArea(document.getElementById("wp_custom_admin_interface_custom_php_code"),{lineNumbers:!0,mode:"application/x-httpd-php",theme:"blackboard",matchBrackets:!0,autoCloseTags:!0,autoCloseBrackets:!0});if($("#accordion").accordion({collapsible:!0,autoHeight:!1,heightStyle:"content",speed:"fast"}),$("#tabs").tabs(),$("#wp_custom_admin_interface_tab_memory").val().length>1){var g=$("#wp_custom_admin_interface_tab_memory").val(),b=$(g).index()-1;$("#tabs").tabs({active:b})}$(".wrap").on("click",".open-tab",function(){var e=$(this).attr("href"),t=$(e).index()-1;$("#tabs").tabs({active:t}),$("#wp_custom_admin_interface_tab_memory").val(e)}),$(".wrap").on("click",".nav-tab",function(){var e=$(this).attr("href");$("#wp_custom_admin_interface_tab_memory").val(e)}),$(".hidden").hide(),$(".information-icon").click(function(e){e.preventDefault(),$(this).next(".hidden").slideToggle()}),$(".my-color-field").wpColorPicker(),$(".postbox").on("click",".wp_custom_admin_interface_media_upload_button",function(e){e.preventDefault();var t=$(this).prev(),a=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(e){var i=a.state().get("selection").first(),n=i.toJSON().url;t.val(n)})}),new Clipboard(".clipboard"),$(".clipboard").click(function(e){e.preventDefault(),$(this).text("Copied!"),setTimeout(function(){$(".clipboard").text("Copy Settings")},2e3)}),$("#import-settings").click(function(e){e.preventDefault(),$(".postbox .notice-error").fadeOut("slow",function(){$(".import-status-message").remove()});var t=$("#wp_custom_admin_interface_import_settings").val(),a=$("#wp_custom_admin_interface_import_settings").attr("data");console.log(t);var i={action:"import_settings",settings:t,security:a};jQuery.post(ajaxurl,i,function(e){"success"==e?($('<div class="notice notice-info is-dismissible import-status-message"><p>Settings imported, the page will refresh automatically in 3 seconds.</p></div>').insertAfter("#import-settings"),setTimeout(location.reload.bind(location),3e3)):$('<div class="notice notice-error is-dismissible import-status-message"><p>'+e+"</p></div>").insertAfter("#import-settings")})}),$("#delete-settings").click(function(e){if(e.preventDefault(),$(".postbox .notice-error").fadeOut("slow",function(){$(".delete-status-message").remove()}),1==confirm("Are you sure you want to delete all plugin settings?")){var t=$("#delete-settings").attr("data"),a={action:"delete_settings",security:t};jQuery.post(ajaxurl,a,function(e){$('<div class="notice notice-info is-dismissible delete-status-message"><p>All plugin settings have been deleted.</p></div>').insertAfter("#delete-settings"),setTimeout(function(){$(".delete-status-message").slideUp()},5500)})}}),$(".datepicker").length&&$(".datepicker").datepicker({dateFormat:"yy-mm-dd"}),$(".wp_custom_admin_interface_append_buttons_footer_text").click(function(){$("#wp_custom_admin_interface_custom_footer_ifr").contents().find("#tinymce p").html($("#wp_custom_admin_interface_custom_footer_ifr").contents().find("#tinymce p").html()+$(this).attr("value")),$("#wp-wp_custom_admin_interface_custom_footer-editor-container").find("textarea").html($("#wp-wp_custom_admin_interface_custom_footer-editor-container").find("textarea").html()+$(this).attr("value"))}),$(".wp_custom_admin_interface_append_buttons_widget_text").click(function(){$("#wp_custom_admin_interface_custom_widget_content_ifr").contents().find("#tinymce p").html($("#wp_custom_admin_interface_custom_widget_content_ifr").contents().find("#tinymce p").html()+$(this).attr("value")),$("#wp-wp_custom_admin_interface_custom_widget_content-editor-container").find("textarea").html($("#wp-wp_custom_admin_interface_custom_widget_content-editor-container").find("textarea").html()+$(this).attr("value"))}),e($("#wp_custom_admin_interface_top_level_menu").val(),$("#wp_custom_admin_interface_sub_level_menu").val()),$("#restore-default-menu").click(function(t){if(t.preventDefault(),1==confirm("Are you sure you want to restore the admin menu to the default WordPress menu? This will delete any customisations made to the menu.")){var a=$("#restore-default-menu").attr("menudata"),n=$("#restore-default-menu").attr("submenudata"),s=JSON.parse(atob(a));$("#wp_custom_admin_interface_top_level_menu").val(a),$("#wp_custom_admin_interface_sub_level_menu").val(n),$("#wp_custom_admin_interface_remove_menu_item").val(""),e(a,n),r(),i(),$('<div class="notice notice-info is-dismissible restore-menu-message"><p>The menu has been successfully restored to the default WordPress menu. Please press "Save All Settings" to save the changes.</p></div>').insertAfter("#admin-menu-manager-buttons"),setTimeout(function(){$(".restore-menu-message").slideUp()},5500)}}),$("#restore-last-save").click(function(t){if(t.preventDefault(),1==confirm("Are you sure you want to restore the admin menu to the last save you did? This will delete any edits you have just done.")){var a=$("#restore-last-save").attr("menudata"),n=$("#restore-last-save").attr("submenudata"),s=$("#restore-last-save").attr("removeditems");$("#wp_custom_admin_interface_top_level_menu").val(a),$("#wp_custom_admin_interface_sub_level_menu").val(n),$("#wp_custom_admin_interface_remove_menu_item").val(s),e(a,n),r(),i(),$('<div class="notice notice-info is-dismissible restore-menu-message"><p>The menu has been successfully restored to the previous save. Please press "Save All Settings" to save the changes.</p></div>').insertAfter("#admin-menu-manager-buttons"),setTimeout(function(){$(".restore-menu-message").slideUp()},5500)}}),$("#poststuff").on("click","#add-menu-item",function(e){e.preventDefault(),$("#admin-menu-manager").prepend('<li class="menu-item menu-item-custom"><div><span data="dashicons-admin-generic" class="menu-item-icon dashicons-before dashicons-admin-generic"></span><input readonly="readonly" type="text" data="" class="menu-label" value="" placeholder="Enter menu label"><i class="fa fa-pencil-square-o edit-menu-item" title="Edit menu label" aria-hidden="true"></i><input readonly="readonly" type="text" data="" class="menu-url" style="margin-left:20px;" value="" placeholder="Enter menu link"><i class="fa fa-link edit-menu-item-link" title="Edit menu link" aria-hidden="true"></i><input readonly="readonly" type="text" data="menu-top added-custom-menu-item" class="menu-classes restricted-advanced-functionality" style="margin-left:20px;" value="menu-top added-custom-menu-item"><i class="restricted-advanced-functionality fa fa-code edit-menu-item-classes" title="Edit menu classes" aria-hidden="true"></i>'+t("read")+'<input readonly="readonly" type="text" data="" class="menu-third-value" style="margin-left:20px;" value=""><input readonly="readonly" type="text" data="" class="menu-fifth-value" style="margin-left:20px;" value=""><i class="fa fa-eye-slash remove-menu-item" title="Hide menu item" aria-hidden="true"></i><i class="fa fa-trash-o delete-menu-item delete-custom-menu-item" title="Remove menu item" aria-hidden="true"></i></div></li>'),i()}),a(),$(".wrap").on("click","#add-separator",function(e){e.preventDefault(),$("#admin-menu-manager").prepend('<li class="mjs-nestedSortable-no-nesting menu-item"><div class="menu-item-separator"><span class="hr-container"><hr class="separator-rule"></span><i class="fa fa-trash-o delete-menu-item delete-separator" title="Remove separator" aria-hidden="true"></i></div></li>')}),$(".wrap").on("click","#advanced-menu-functionality",function(e){if(e.preventDefault(),"inline-block"==$(".restricted-advanced-functionality").css("display"))$(".restricted-advanced-functionality").css({display:"none"}),$("#advanced-menu-functionality").html('<i class="fa fa-superpowers" aria-hidden="true"></i> Advanced functionality');else{new Clipboard("#advanced-menu-functionality");1==confirm("With great power comes great responsibility! With this option enabled you have the potential to do edits on the default WordPress menu options. But this also means that you may not be able to find your way back here if you start hiding all the standard menus! As a precaution we have copied an emergency URL to your clipboard. So if you get stuck just paste this into the browser and all settings related to this custom admin menu will be deleted so you can start again. This URL can also be found in the FAQ section of the Wordpress plugin website.")&&($(".restricted-advanced-functionality").css({display:"inline-block"}),$("#advanced-menu-functionality").html('<i class="fa fa-universal-access" aria-hidden="true"></i> Simple functionality'))}}),n(),$(".wrap").on("click",".delete-menu-item",function(){1==confirm("Are you sure you want to delete this menu item?")&&$(this).parent().parent().remove()}),$(".wrap").on("click",".edit-menu-item",function(){1==$(this).prev().prop("readonly")?($(this).prev().prop("readonly",!1),$(this).removeClass("fa-pencil-square-o"),$(this).addClass("fa-check")):($(this).prev().prop("readonly",!0),$(this).addClass("fa-pencil-square-o"),$(this).removeClass("fa-check"))}),$(".wrap").on("click",".edit-menu-item-link",function(){1==$(this).prev().prop("readonly")?($(this).prev().prop("readonly",!1),$(this).removeClass("fa-link"),$(this).addClass("fa-check")):($(this).prev().prop("readonly",!0),$(this).addClass("fa-link"),$(this).removeClass("fa-check"))}),$(".wrap").on("click",".edit-menu-item-classes",function(){1==$(this).prev().prop("readonly")?($(this).prev().prop("readonly",!1),$(this).removeClass("fa-code"),$(this).addClass("fa-check")):($(this).prev().prop("readonly",!0),$(this).addClass("fa-code"),$(this).removeClass("fa-check"))}),$(".wrap").on("click",".edit-menu-capability",function(){1==$(this).prev().prop("disabled")?($(this).prev().prop("disabled",!1),$(this).removeClass("fa-lock"),$(this).addClass("fa-check")):($(this).prev().prop("disabled",!0),$(this).addClass("fa-lock"),$(this).removeClass("fa-check"))}),$(".wrap").on("click",".remove-menu-item",function(){var e=$(this).parent().parent();$(e).hasClass("removed-menu-item")?($(e).removeClass("removed-menu-item"),$(this).removeClass("fa-eye"),$(this).addClass("fa-eye-slash")):($(e).addClass("removed-menu-item"),$(this).addClass("fa-eye"),$(this).removeClass("fa-eye-slash"))}),r(),$(".wrap").on("click",".menu-item-icon",function(){var e=this;$("#custom-icon-dialog").hasClass("ui-dialog-content")&&$("#custom-icon-dialog").dialog("isOpen")?$("#custom-icon-dialog").dialog("close"):($("#custom-icon-dialog").dialog({modal:!0,draggagle:!0,width:700,open:function(){$(".ui-dialog-titlebar-close").blur(),$(".wp_custom_admin_interface_media_upload_button").blur(),$(this).unbind("click")}}),$("#custom-icon-dialog").on("click",".icon-for-selection",function(){var t=$(this).attr("data");-1!==t.indexOf("dashicons-")?($(e).parent().prepend('<span data="'+t+'" class="menu-item-icon dashicons-before '+t+'"></span>'),$(e).remove()):($(e).parent().prepend('<span data="'+t+'" class="svg svg-menu-icon menu-item-icon" style="background-image: url(&quot;'+t+'&quot;)"></span>'),$(e).remove()),$("#custom-icon-dialog").dialog("close")}),$("#custom-icon-dialog").on("click",".wp_custom_admin_interface_media_upload_button",function(t){t.preventDefault();var a=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(t){var i=a.state().get("selection").first(),n=i.toJSON().url;$(e).parent().prepend('<span data="'+n+'" class="svg svg-menu-icon menu-item-icon" style="background-image: url(&quot;'+n+'&quot;)"></span>'),$(e).remove(),$("#custom-icon-dialog").dialog("close")})}))}),$("#admin-menu-manager").nestedSortable({handle:"div",items:"li",toleranceElement:"> div",maxLevels:2,listType:"ul",isTree:!0}),$("#custom_admin_interface_settings_form").submit(function(){$('<div class="notice notice-warning is-dismissible settings-loading-message"><p><i class="fa fa-circle-o-notch wp-custom-admin-interface-loading" aria-hidden="true"></i> Please wait while we save the settings...</p></div>').insertAfter(".wp-custom-admin-interface-save-button");var e="";$("#admin-menu-manager > .removed-menu-item > div").each(function(t){var a=$(this).find(".menu-url").val();$(this).find(".menu-label").attr("data",a),e+=a+","}),$("#admin-menu-manager > li > ul > .removed-menu-item").each(function(t){var a=$(this).find(".menu-url").val(),i=$(this).parent().prev().find(".menu-label").attr("data"),n=i+"["+a+"]";$(this).find(".menu-label").attr("data",n),e+=n+","}),$("#wp_custom_admin_interface_remove_menu_item").val(e),$(".duplication-error").removeClass("duplication-error");var t=[];$("#admin-menu-manager > .menu-item > div").each(function(){var e=$(this).find(".menu-url").val();t.push(e)});for(var a=t.slice().sort(),i=[],n=0;n<t.length-1;n++)a[n+1]==a[n]&&null!=a[n]&&i.push(a[n]);if(i.length>0){var r=!0;alert("We found there were 2 or more items in the top level of your menu that have the same destination URL. This can cause unexpected results. As a result we won't save the settings until the issue is corrected. We have highlighted these items red. Please change one of the URL's or delete one of the menu items."),$.each(i,function(e,t){var a=t;$("#admin-menu-manager > .menu-item > div").each(function(){var e=$(this).find(".menu-url").val(),t=$(this).find(".menu-url");e==a&&($(t).addClass("duplication-error"),s())})})}else var r=!1;$(".no-url-value").removeClass("no-url-value");var o=0;$("#admin-menu-manager .menu-url").each(function(){""==$(this).val()&&($(this).addClass("no-url-value"),o++)}),o>0&&(alert("We found that some of your menu items have no URL. Please make sure every item has a URL. As a result we won't save the settings until the issue is corrected. We have highlighted these items red."),r=!0,s());var l=[],d=0;$("#admin-menu-manager > li").each(function(e){var t=$(this).find(".menu-label").val(),a=$(this).find(".menu-capability").val(),i=$(this).find(".menu-url").val(),n=encodeURIComponent($(this).find(".menu-third-value").val()).replace(/%20/g," "),s=$(this).find(".menu-classes").val(),r=encodeURIComponent($(this).find(".menu-fifth-value").val()).replace(/%20/g," "),o=$(this).find(".menu-item-icon").attr("data"),c="",u="read",m="separator-"+d;d++;var p="",f="wp-menu-separator";if(null==t)var v=["","read",m,"","wp-menu-separator"];else var v=[t,a,i,n,s,r,o];l.push(v)});var c=btoa(JSON.stringify(l));$("#wp_custom_admin_interface_top_level_menu").val(c),$("#admin-menu-manager > li > ul > .mjs-nestedSortable-no-nesting").remove();var u={};$("#admin-menu-manager > li > ul").each(function(e){var t=$(this).parent().find(".menu-url").val(),a=$(this),i=$(this).find("li"),n={};$(i).each(function(e){var t=$(this).find(".menu-label").val(),a=$(this).find(".menu-capability").val(),i=$(this).find(".menu-url").val(),s=encodeURIComponent($(this).find(".menu-third-value").val()).replace(/%20/g," ");subLevelMenuItemArray="undefined"==s?[t,a,i]:[t,a,i,s],n[e]=subLevelMenuItemArray}),u[t]=n});var m=btoa(JSON.stringify(u));$("#wp_custom_admin_interface_sub_level_menu").val(m),$(".userAndRoleSelection").each(function(){var e="",t=$(this).next().next();$.each(t.find("select"),function(){var t=$(this).val();e+=t+","}),t.find(".saved_exception_cases").val(e)});var p="";$("#toolbar-menu-manager li > div").each(function(e){if($(this).hasClass("removed-node-item")){var t=$(this).find(".node-id").attr("data");p+=t+","}}),$("#wp_custom_admin_interface_remove_toolbar_item").val(p);var f={};$("#toolbar-menu-manager li > div").each(function(e){var t=$(this),a="true"===t.attr("data-group"),i=t.find(".node-href").val();""==i&&(i=!1);var n=t.find(".node-id").attr("data"),s=[],r=t.parent().parent().prev().find(".node-id").attr("data");null==r&&(r=!1);var o=t.find(".node-title").val();""==o&&(o=!1);var l={group:a,href:i,id:n,meta:s,parent:r,title:o};f[n]=l});var v=btoa(JSON.stringify(f));if($("#wp_custom_admin_interface_primary_toolbar_menu").val(v),0==r){var h={action:"delete_transients"};return jQuery.post(ajaxurl,h,function(e){}),tinyMCE.triggerSave(),$(this).ajaxSubmit({success:function(){$(".settings-loading-message").remove(),$('<div class="notice notice-success is-dismissible settings-saved-message"><p>The settings have been saved.</p></div>').insertAfter(".wp-custom-admin-interface-save-button"),setTimeout(function(){$(".settings-saved-message").slideUp()},3e3)}}),!1}$(".settings-loading-message").remove()}),$(".userAndRoleSelection").each(function(e){var t=$(this),a=$(this).next().next(),i=a.find(".saved_exception_cases").val(),n=i.slice(0,-1),s=n.split(",");i.length>0?$.each(s,function(e,t){l(t,a)}):d(a)}),$(".wrap").on("click",".add-exception-case",function(e){e.preventDefault();var t=$(this).parent().parent().parent().parent();$(this).parent().parent().find("#add-initial-exception").remove(),l("",t)}),$(".wrap").on("click",".remove-exception-case",function(e){e.preventDefault();var t=$(this).parent().parent(),a=$(this).parent().parent().parent();1==t.find(".exception-case").length?($(this).parent().remove(),d(a)):$(this).parent().remove()}),$(".wrap").on("click",".remove-plugin-item",function(){var e=$("#wp_custom_admin_interface_hide_these_plugins").val();if(null!=e)var t=e.split(",");var a=$(this).parent().find("#plugin-name").attr("data");-1!=$.inArray(a,t)?($(this).parent().parent().removeClass("hidden-plugin-item"),$(this).removeClass("fa-eye"),$(this).addClass("fa-eye-slash"),t.splice($.inArray(a,t),1),$("#wp_custom_admin_interface_hide_these_plugins").val(t.join())):($(this).parent().parent().addClass("hidden-plugin-item"),$(this).addClass("fa-eye"),$(this).removeClass("fa-eye-slash"),t.push(a),$("#wp_custom_admin_interface_hide_these_plugins").val(t.join()))}),c(),$(".wrap").on("click",".remove-user-item",function(){var e=$("#wp_custom_admin_interface_hide_these_users").val();if(null!=e)var t=e.split(",");var a=$(this).parent().find("#user-name").attr("data");-1!=$.inArray(a,t)?($(this).parent().parent().removeClass("hidden-user-item"),$(this).removeClass("fa-eye"),$(this).addClass("fa-eye-slash"),t.splice($.inArray(a,t),1),$("#wp_custom_admin_interface_hide_these_users").val(t.join())):($(this).parent().parent().addClass("hidden-user-item"),$(this).addClass("fa-eye"),$(this).removeClass("fa-eye-slash"),t.push(a),$("#wp_custom_admin_interface_hide_these_users").val(t.join()))}),u(),$(".wrap").on("click",".remove-sidebar-item",function(){var e=$("#wp_custom_admin_interface_hide_these_sidebars").val();if(null!=e)var t=e.split(",");var a=$(this).parent().find("#sidebar-name").attr("data");-1!=$.inArray(a,t)?($(this).parent().parent().removeClass("hidden-sidebar-item"),$(this).removeClass("fa-eye"),$(this).addClass("fa-eye-slash"),t.splice($.inArray(a,t),1),$("#wp_custom_admin_interface_hide_these_sidebars").val(t.join())):($(this).parent().parent().addClass("hidden-sidebar-item"),$(this).addClass("fa-eye"),$(this).removeClass("fa-eye-slash"),t.push(a),$("#wp_custom_admin_interface_hide_these_sidebars").val(t.join()))}),m(),p($("#wp_custom_admin_interface_primary_toolbar_menu").val()),$("#toolbar-menu-manager").nestedSortable({handle:"div",items:"li",toleranceElement:"> div",listType:"ul",isTree:!0}),$(".wrap").on("click",".edit-node-title",function(){1==$(this).prev().prop("readonly")?($(this).prev().prop("readonly",!1),$(this).removeClass("fa-pencil-square-o"),$(this).addClass("fa-check")):($(this).prev().prop("readonly",!0),$(this).addClass("fa-pencil-square-o"),$(this).removeClass("fa-check"))}),$(".wrap").on("click",".edit-node-link",function(){1==$(this).prev().prop("readonly")?($(this).prev().prop("readonly",!1),$(this).removeClass("fa-link"),$(this).addClass("fa-check")):($(this).prev().prop("readonly",!0),$(this).addClass("fa-link"),$(this).removeClass("fa-check"))}),$(".wrap").on("click",".remove-node-item",function(){var e=$(this).parent();$(e).hasClass("removed-node-item")?($(e).removeClass("removed-node-item"),$(this).removeClass("fa-eye"),$(this).addClass("fa-eye-slash")):($(e).addClass("removed-node-item"),$(this).addClass("fa-eye"),$(this).removeClass("fa-eye-slash"))}),f(),$("#poststuff").on("click","#add-node-item",function(e){function t(){var e="unique-node-",t=e.length,a=[];if($("#toolbar-menu-manager .node-id").each(function(i){var n=$(this).attr("data"),s=n.length;if(-1!==n.indexOf(e)){var r=n.substr(t,s-t);a.push(parseInt(r))}}),0==a.length)var i=1;else{for(var i=a[0],n=0;n<a.length;n++)i<a[n]&&(i=a[n]);i++}return e+i}e.preventDefault();var a=t();$("#toolbar-menu-manager").prepend('<li class="mjs-nestedSortable-branch mjs-nestedSortable-expanded"><div data-group="false" class="ui-sortable-handle"><span class="node-id" data="'+a+'" style="display:none;">'+a+'</span><input style="font-weight:bold;" title="" readonly="readonly" type="text" class="node-title" value=""><i class="fa fa-pencil-square-o edit-node-title" title="Edit menu title" aria-hidden="true"></i><input style="margin-left: 20px;" readonly="readonly" type="text" class="node-href" value=""><i class="fa fa-link edit-node-link" title="Edit menu link" aria-hidden="true" style="display: inline-block;"></i><i class="fa fa-eye-slash remove-node-item" title="Hide menu item" aria-hidden="true"></i><i class="fa fa-trash-o delete-node-item delete-custom-node-item" title="Remove menu item" aria-hidden="true"></i></div></li>')}),$(".wrap").on("click",".delete-node-item",function(){1==confirm("Are you sure you want to delete this menu item?")&&$(this).parent().parent().remove()}),v(),$("#restore-default-toolbar").click(function(e){if(e.preventDefault(),1==confirm("Are you sure you want to restore the toolbar menu to the default WordPress toolbar? This will delete any customisations made to the menu.")){
var t=$("#restore-default-toolbar").attr("toolbardata");$("#wp_custom_admin_interface_primary_toolbar_menu").val(t),$("#wp_custom_admin_interface_remove_toolbar_item").val(""),p(t),f(),$('<div class="notice notice-info is-dismissible restore-menu-message"><p>The toolbar has been successfully restored to the default WordPress toolbar. Please press "Save All Settings" to save the changes.</p></div>').insertAfter("#admin-toolbar-manager-buttons"),setTimeout(function(){$(".restore-menu-message").slideUp()},5500)}}),$("#restore-last-save-toolbar").click(function(e){if(e.preventDefault(),1==confirm("Are you sure you want to restore the toolbar menu to the last save you did? This will delete any edits you have just done.")){var t=$("#restore-last-save-toolbar").attr("toolbardata"),a=$("#restore-last-save-toolbar").attr("removeditems");$("#wp_custom_admin_interface_primary_toolbar_menu").val(t),$("#wp_custom_admin_interface_remove_toolbar_item").val(a),p(t),f(),$('<div class="notice notice-info is-dismissible restore-menu-message"><p>The toolbar has been successfully restored to the previous save. Please press "Save All Settings" to save the changes.</p></div>').insertAfter("#admin-toolbar-manager-buttons"),setTimeout(function(){$(".restore-menu-message").slideUp()},5500)}})});