!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,r){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}e.defineMode("javascript",function(r,n){function a(e){for(var t=!1,r,n=!1;null!=(r=e.next());){if(!t){if("/"==r&&!n)return;"["==r?n=!0:n&&"]"==r&&(n=!1)}t=!t&&"\\"==r}}function i(e,t,r){return We=e,Pe=r,t}function o(e,r){var n=e.next();if('"'==n||"'"==n)return r.tokenize=c(n),r.tokenize(e,r);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if("."==n&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return i(n);if("="==n&&e.eat(">"))return i("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if("0"==n&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),i("number","number");if("0"==n&&e.eat(/b/i))return e.eatWhile(/[01]/i),i("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==n)return e.eat("*")?(r.tokenize=u,u(e,r)):e.eat("/")?(e.skipToEnd(),i("comment","comment")):t(e,r,1)?(a(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),i("regexp","string-2")):(e.eatWhile(Ce),i("operator","operator",e.current()));if("`"==n)return r.tokenize=l,l(e,r);if("#"==n)return e.skipToEnd(),i("error","error");if(Ce.test(n))return">"==n&&r.lexical&&">"==r.lexical.type||e.eatWhile(Ce),i("operator","operator",e.current());if($e.test(n)){e.eatWhile($e);var o=e.current();if("."!=r.lastType){if(qe.propertyIsEnumerable(o)){var s=qe[o];return i(s.type,s.style,o)}if("async"==o&&e.match(/^\s*[\(\w]/,!1))return i("async","keyword",o)}return i("variable","variable",o)}}function c(e){return function(t,r){var n=!1,a;if(ze&&"@"==t.peek()&&t.match(Oe))return r.tokenize=o,i("jsonld-keyword","meta");for(;null!=(a=t.next())&&(a!=e||n);)n=!n&&"\\"==a;return n||(r.tokenize=o),i("string","string")}}function u(e,t){for(var r=!1,n;n=e.next();){if("/"==n&&r){t.tokenize=o;break}r="*"==n}return i("comment","comment")}function l(e,t){for(var r=!1,n;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=o;break}r=!r&&"\\"==n}return i("quasi","string-2",e.current())}function s(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){if(Te){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var a=0,i=!1,o=r-1;o>=0;--o){var c=e.string.charAt(o),u=Se.indexOf(c);if(u>=0&&u<3){if(!a){++o;break}if(0==--a){"("==c&&(i=!0);break}}else if(u>=3&&u<6)++a;else if($e.test(c))i=!0;else{if(/["'\/]/.test(c))return;if(i&&!a){++o;break}}}i&&!a&&(t.fatArrowAt=o)}}function f(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function d(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(var r=n.vars;r;r=r.next)if(r.name==t)return!0}function p(e,t,r,n,a){var i=e.cc;for(Be.state=e,Be.stream=a,Be.marked=null,Be.cc=i,Be.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){if((i.length?i.pop():Ae?j:g)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return Be.marked?Be.marked:"variable"==r&&d(e,n)?"variable-2":t}}}function m(){for(var e=arguments.length-1;e>=0;e--)Be.cc.push(arguments[e])}function v(){return m.apply(null,arguments),!0}function y(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var r=Be.state;if(Be.marked="def",r.context){if(t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function k(){Be.state.context={prev:Be.state.context,vars:Be.state.localVars},Be.state.localVars=He}function b(){Be.state.localVars=Be.state.context.vars,Be.state.context=Be.state.context.prev}function x(e,t){var r=function(){var r=Be.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var a=r.lexical;a&&")"==a.type&&a.align;a=a.prev)n=a.indented;r.lexical=new f(n,Be.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function h(){var e=Be.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function w(e){function t(r){return r==e?v():";"==e?m():v(t)}return t}function g(e,t){return"var"==e?v(x("vardef",t.length),_,w(";"),h):"keyword a"==e?v(x("form"),V,g,h):"keyword b"==e?v(x("form"),g,h):"{"==e?v(x("}"),K,h):";"==e?v():"if"==e?("else"==Be.state.lexical.info&&Be.state.cc[Be.state.cc.length-1]==h&&Be.state.cc.pop()(),v(x("form"),V,g,h,ae)):"function"==e?v(se):"for"==e?v(x("form"),ie,g,h):"variable"==e?Te&&"type"==t?(Be.marked="keyword",v(Q,w("operator"),Q,w(";"))):v(x("stat"),B):"switch"==e?v(x("form"),V,w("{"),x("}","switch"),K,h,h):"case"==e?v(j,w(":")):"default"==e?v(w(":")):"catch"==e?v(x("form"),k,w("("),fe,w(")"),g,h,b):"class"==e?v(x("form"),pe,h):"export"==e?v(x("stat"),ke,h):"import"==e?v(x("stat"),xe,h):"module"==e?v(x("form"),ee,w("{"),x("}"),K,h,h):"async"==e?v(g):"@"==t?v(j,g):m(x("stat"),j,w(";"),h)}function j(e){return E(e,!1)}function M(e){return E(e,!0)}function V(e){return"("!=e?m():v(x(")"),j,w(")"),h)}function E(e,t){if(Be.state.fatArrowAt==Be.stream.start){var r=t?W:O;if("("==e)return v(k,x(")"),G(ee,")"),h,w("=>"),r,b);if("variable"==e)return m(k,ee,w("=>"),r,b)}var n=t?T:A;return Ne.hasOwnProperty(e)?v(n):"function"==e?v(se,n):"class"==e?v(x("form"),de,h):"keyword c"==e||"async"==e?v(t?z:I):"("==e?v(x(")"),I,w(")"),h,n):"operator"==e||"spread"==e?v(t?M:j):"["==e?v(x("]"),Me,h,n):"{"==e?J(U,"}",null,n):"quasi"==e?m(q,n):"new"==e?v(P(t)):v()}function I(e){return e.match(/[;\}\)\],]/)?m():m(j)}function z(e){return e.match(/[;\}\)\],]/)?m():m(M)}function A(e,t){return","==e?v(j):T(e,t,!1)}function T(e,t,r){var n=0==r?A:T,a=0==r?j:M;return"=>"==e?v(k,r?W:O,b):"operator"==e?/\+\+|--/.test(t)?v(n):"?"==t?v(j,w(":"),a):v(a):"quasi"==e?m(q,n):";"!=e?"("==e?J(M,")","call",n):"."==e?v(H,n):"["==e?v(x("]"),I,w("]"),h,n):Te&&"as"==t?(Be.marked="keyword",v(Q,n)):void 0:void 0}function q(e,t){return"quasi"!=e?m():"${"!=t.slice(t.length-2)?v(q):v(j,C)}function C(e){if("}"==e)return Be.marked="string-2",Be.state.tokenize=l,v(q)}function O(e){return s(Be.stream,Be.state),m("{"==e?g:j)}function W(e){return s(Be.stream,Be.state),m("{"==e?g:M)}function P(e){return function(t){return"."==t?v(e?N:S):m(e?M:j)}}function S(e,t){if("target"==t)return Be.marked="keyword",v(A)}function N(e,t){if("target"==t)return Be.marked="keyword",v(T)}function B(e){return":"==e?v(h,g):m(A,w(";"),h)}function H(e){if("variable"==e)return Be.marked="property",v()}function U(e,t){return"async"==e?(Be.marked="property",v(U)):"variable"==e||"keyword"==Be.style?(Be.marked="property",v("get"==t||"set"==t?D:F)):"number"==e||"string"==e?(Be.marked=ze?"property":Be.style+" property",v(F)):"jsonld-keyword"==e?v(F):"modifier"==e?v(U):"["==e?v(j,w("]"),F):"spread"==e?v(j,F):":"==e?m(F):void 0}function D(e){return"variable"!=e?m(F):(Be.marked="property",v(se))}function F(e){return":"==e?v(M):"("==e?m(se):void 0}function G(e,t,r){function n(a,i){if(r?r.indexOf(a)>-1:","==a){var o=Be.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),v(function(r,n){return r==t||n==t?m():m(e)},n)}return a==t||i==t?v():v(w(t))}return function(r,a){return r==t||a==t?v():m(e,n)}}function J(e,t,r){for(var n=3;n<arguments.length;n++)Be.cc.push(arguments[n]);return v(x(t,r),G(e,t),h)}function K(e){return"}"==e?v():m(g,K)}function L(e,t){if(Te){if(":"==e)return v(Q);if("?"==t)return v(L)}}function Q(e){return"variable"==e?(Be.marked="type",v(Z)):"string"==e||"number"==e||"atom"==e?v(Z):"{"==e?v(x("}"),G(X,"}",",;"),h,Z):"("==e?v(G(Y,")"),R):void 0}function R(e){if("=>"==e)return v(Q)}function X(e,t){return"variable"==e||"keyword"==Be.style?(Be.marked="property",v(X)):"?"==t?v(X):":"==e?v(Q):"["==e?v(j,L,w("]"),X):void 0}function Y(e){return"variable"==e?v(Y):":"==e?v(Q):void 0}function Z(e,t){return"<"==t?v(x(">"),G(Q,">"),h,Z):"|"==t||"."==e?v(Q):"["==e?v(w("]"),Z):"extends"==t?v(Q):void 0}function _(){return m(ee,L,re,ne)}function ee(e,t){return"modifier"==e?v(ee):"variable"==e?(y(t),v()):"spread"==e?v(ee):"["==e?J(ee,"]"):"{"==e?J(te,"}"):void 0}function te(e,t){return"variable"!=e||Be.stream.match(/^\s*:/,!1)?("variable"==e&&(Be.marked="property"),"spread"==e?v(ee):"}"==e?m():v(w(":"),ee,re)):(y(t),v(re))}function re(e,t){if("="==t)return v(M)}function ne(e){if(","==e)return v(_)}function ae(e,t){if("keyword b"==e&&"else"==t)return v(x("form","else"),g,h)}function ie(e){if("("==e)return v(x(")"),oe,w(")"),h)}function oe(e){return"var"==e?v(_,w(";"),ue):";"==e?v(ue):"variable"==e?v(ce):m(j,w(";"),ue)}function ce(e,t){return"in"==t||"of"==t?(Be.marked="keyword",v(j)):v(A,ue)}function ue(e,t){return";"==e?v(le):"in"==t||"of"==t?(Be.marked="keyword",v(j)):m(j,w(";"),le)}function le(e){")"!=e&&v(j)}function se(e,t){return"*"==t?(Be.marked="keyword",v(se)):"variable"==e?(y(t),v(se)):"("==e?v(k,x(")"),G(fe,")"),h,L,g,b):Te&&"<"==t?v(x(">"),G(Q,">"),h,se):void 0}function fe(e){return"spread"==e?v(fe):m(ee,L,re)}function de(e,t){return"variable"==e?pe(e,t):me(e,t)}function pe(e,t){if("variable"==e)return y(t),v(me)}function me(e,t){return"<"==t?v(x(">"),G(Q,">"),h,me):"extends"==t||"implements"==t||Te&&","==e?v(Te?Q:j,me):"{"==e?v(x("}"),ve,h):void 0}function ve(e,t){return"variable"==e||"keyword"==Be.style?("async"==t||"static"==t||"get"==t||"set"==t||Te&&("public"==t||"private"==t||"protected"==t||"readonly"==t||"abstract"==t))&&Be.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Be.marked="keyword",v(ve)):(Be.marked="property",v(Te?ye:se,ve)):"["==e?v(j,w("]"),Te?ye:se,ve):"*"==t?(Be.marked="keyword",v(ve)):";"==e?v(ve):"}"==e?v():"@"==t?v(j,ve):void 0}function ye(e,t){return"?"==t?v(ye):":"==e?v(Q,re):"="==t?v(M):m(se)}function ke(e,t){return"*"==t?(Be.marked="keyword",v(je,w(";"))):"default"==t?(Be.marked="keyword",v(j,w(";"))):"{"==e?v(G(be,"}"),je,w(";")):m(g)}function be(e,t){return"as"==t?(Be.marked="keyword",v(w("variable"))):"variable"==e?m(M,be):void 0}function xe(e){return"string"==e?v():m(he,we,je)}function he(e,t){return"{"==e?J(he,"}"):("variable"==e&&y(t),"*"==t&&(Be.marked="keyword"),v(ge))}function we(e){if(","==e)return v(he,we)}function ge(e,t){if("as"==t)return Be.marked="keyword",v(he)}function je(e,t){if("from"==t)return Be.marked="keyword",v(j)}function Me(e){return"]"==e?v():m(G(M,"]"))}function Ve(e,t){return"operator"==e.lastType||","==e.lastType||Ce.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}var Ee=r.indentUnit,Ie=n.statementIndent,ze=n.jsonld,Ae=n.json||ze,Te=n.typescript,$e=n.wordCharacters||/[\w$\xa1-\uffff]/,qe=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"},o={if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:n,break:n,continue:n,new:e("new"),delete:n,throw:n,debugger:n,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:i,false:i,null:i,undefined:i,NaN:i,Infinity:i,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n};if(Te){var c={type:"variable",style:"type"},u={interface:e("class"),implements:n,namespace:n,module:e("module"),enum:e("module"),public:e("modifier"),private:e("modifier"),protected:e("modifier"),abstract:e("modifier"),string:c,number:c,boolean:c,any:c};for(var l in u)o[l]=u[l]}return o}(),Ce=/[+\-*&%=<>!?|~^@]/,Oe=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,We,Pe,Se="([{}])",Ne={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Be={state:null,column:null,marked:null,cc:null},He={name:"this",next:{name:"arguments"}};return h.lex=!0,{startState:function(e){var t={tokenize:o,lastType:"sof",cc:[],lexical:new f((e||0)-Ee,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),s(e,t)),t.tokenize!=u&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==We?r:(t.lastType="operator"!=We||"++"!=Pe&&"--"!=Pe?We:"incdec",p(t,r,We,Pe,e))},indent:function(t,r){if(t.tokenize==u)return e.Pass;if(t.tokenize!=o)return 0;var a=r&&r.charAt(0),i=t.lexical,c;if(!/^\s*else\b/.test(r))for(var l=t.cc.length-1;l>=0;--l){var s=t.cc[l];if(s==h)i=i.prev;else if(s!=ae)break}for(;("stat"==i.type||"form"==i.type)&&("}"==a||(c=t.cc[t.cc.length-1])&&(c==A||c==T)&&!/^[,\.=+\-*:?[\(]/.test(r));)i=i.prev;Ie&&")"==i.type&&"stat"==i.prev.type&&(i=i.prev);var f=i.type,d=a==f;return"vardef"==f?i.indented+("operator"==t.lastType||","==t.lastType?i.info+1:0):"form"==f&&"{"==a?i.indented:"form"==f?i.indented+Ee:"stat"==f?i.indented+(Ve(t,r)?Ie||Ee:0):"switch"!=i.info||d||0==n.doubleIndentSwitch?i.align?i.column+(d?0:1):i.indented+(d?0:Ee):i.indented+(/^(?:case|default)\b/.test(r)?Ee:2*Ee)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Ae?null:"/*",blockCommentEnd:Ae?null:"*/",lineComment:Ae?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Ae?"json":"javascript",jsonldMode:ze,jsonMode:Ae,expressionAllowed:t,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=j&&t!=M||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});